<ion-header class="ion-no-border glass-effect">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button color="primary"></ion-menu-button>
        </ion-buttons>
        <ion-title class="text-gradient">Explorar Artistas</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <div class="artist-wrapper">
        <!-- Background Decor -->
        <div class="blob-bg"></div>
        <div class="blob-bg secondary"></div>

        <div class="artist-container">
            <!-- Premium Searchbar -->
            <div class="search-section animate-up">
                <ion-searchbar placeholder="Busca artistas, géneros..." (ionInput)="handleSearch($event)"
                    animated="true" debounce="500" mode="ios" class="custom-searchbar">
                </ion-searchbar>
            </div>

            <!-- Loading State -->
            <div *ngIf="isLoading" class="ion-text-center padding-xl">
                <ion-spinner name="crescent" color="primary"></ion-spinner>
                <p class="loading-text">Sincronizando biblioteca...</p>
            </div>

            <!-- Error State -->
            <div *ngIf="errorMessage" class="error-state animate-up">
                <ion-icon name="alert-circle-outline" color="danger"></ion-icon>
                <h3>¡Ups! Algo salió mal</h3>
                <p>{{ errorMessage }}</p>
                <ion-button fill="outline" shape="round" (click)="loadArtists()">
                    Reintentar
                </ion-button>
            </div>

            <!-- Main Results Swiper -->
            <section class="section animate-up" *ngIf="!isLoading && filteredArtists.length > 0">
                <div class="section-header">
                    <h2 class="section-title">Destacados</h2>
                    <ion-icon name="sparkles-outline" color="primary"></ion-icon>
                </div>

                <swiper-container slides-per-view="1.2" centered-slides="true" space-between="25" class="artist-swiper">
                    <swiper-slide *ngFor="let artist of filteredArtists" (click)="ShowSongsByArtists(artist)">
                        <div class="artist-card-v2">
                            <div class="artist-image-box">
                                <img *ngIf="artist.image" [src]="artist.image" [alt]="artist.nombre" />
                                <div *ngIf="!artist.image" class="initial-box">
                                    {{ artist.nombre.charAt(0) }}
                                </div>
                                <div class="play-hint">
                                    <ion-icon name="musical-note-outline"></ion-icon>
                                </div>
                            </div>
                            <div class="artist-info-box">
                                <h3>{{ artist.nombre }}</h3>
                                <p>{{ artist.genero }}</p>
                            </div>
                        </div>
                    </swiper-slide>
                </swiper-container>
            </section>

            <!-- Detailed List View -->
            <section class="section animate-up" *ngIf="!isLoading && filteredArtists.length > 0"
                style="animation-delay: 0.1s">
                <h2 class="section-title">Todos los Artistas</h2>
                <ion-list lines="none" class="transparent-list">
                    <ion-item *ngFor="let artist of filteredArtists" class="modern-artist-item" button detail="false"
                        (click)="ShowSongsByArtists(artist)">
                        <ion-avatar slot="start">
                            <img *ngIf="artist.image" [src]="artist.image" [alt]="artist.nombre" />
                            <div *ngIf="!artist.image" class="avatar-placeholder">
                                {{ artist.nombre.charAt(0) }}
                            </div>
                        </ion-avatar>
                        <ion-label>
                            <h3>{{ artist.nombre }}</h3>
                            <p>{{ artist.genero }} • {{ artist.pais || 'Global' }}</p>
                        </ion-label>
                        <ion-icon name="chevron-forward-outline" slot="end" color="medium"></ion-icon>
                    </ion-item>
                </ion-list>
            </section>

            <!-- Empty State -->
            <div *ngIf="!isLoading && filteredArtists.length === 0" class="empty-state animate-up">
                <ion-icon name="search-outline"></ion-icon>
                <h3>No encontramos artistas</h3>
                <p>Prueba con otro nombre o género musical.</p>
            </div>
        </div>
    </div>
</ion-content>