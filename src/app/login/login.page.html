<ion-content [fullscreen]="true">
  <div class="auth-wrapper">
    <!-- Decorative background -->
    <div class="blob-bg"></div>
    <div class="blob-bg secondary"></div>

    <div class="auth-container animate-up">
      <div class="brand-section">
        <div class="logo-box">
          <ion-icon name="musical-notes-outline"></ion-icon>
        </div>
        <h1 class="text-gradient">MusicApp</h1>
        <p>Tu música, tu estilo, en un solo lugar.</p>
      </div>

      <ion-card class="glass-card">
        <div class="card-header">
          <h2>Iniciar Sesión</h2>
          <p>Bienvenido de nuevo</p>
        </div>

        <form [formGroup]="loginForm" (ngSubmit)="loginUser(loginForm.value)">
          <div class="input-group">
            <ion-item lines="none" class="custom-input">
              <ion-icon name="mail-outline" slot="start"></ion-icon>
              <ion-input type="email" placeholder="Correo electrónico" formControlName="email">
              </ion-input>
            </ion-item>
            <div class="error-text" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.dirty">
              Email inválido o campo vacío
            </div>
          </div>

          <div class="input-group">
            <ion-item lines="none" class="custom-input">
              <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
              <ion-input [type]="showPassword ? 'text' : 'password'" placeholder="Contraseña"
                formControlName="password">
              </ion-input>
              <ion-button fill="clear" slot="end" (click)="togglePasswordVisibility()" class="eye-btn">
                <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
              </ion-button>
            </ion-item>
          </div>

          <div class="extra-options">
            <ion-item lines="none" class="check-item">
              <ion-checkbox slot="start"></ion-checkbox>
              <ion-label>Recordarme</ion-label>
            </ion-item>
            <a routerLink="/forgot" class="forgot-link">¿Olvidaste tu contraseña?</a>
          </div>

          <div class="error-summary" *ngIf="errorMessage">
            {{ errorMessage }}
          </div>

          <ion-button expand="block" shape="round" type="submit" [disabled]="!loginForm.valid" class="main-btn">
            Entrar
          </ion-button>
        </form>
      </ion-card>

      <div class="footer-prompt">
        <span>¿No tienes una cuenta?</span>
        <a routerLink="/register">Regístrate gratis</a>
      </div>
    </div>
  </div>
</ion-content>