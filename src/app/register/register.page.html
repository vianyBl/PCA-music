<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Registro</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Registro</ion-title>
    </ion-toolbar>
  </ion-header>

  <form (ngSubmit)="register()" class="register-form">
    <ion-card class="register-card fade-in">
      <ion-card-content>
        <ion-list>

          <ion-item>
            <ion-input
              label="Usuario"
              labelPlacement="floating"
              [(ngModel)]="username"
              name="username"
              required
              placeholder="Tu nombre">
            </ion-input>
          </ion-item>
          <div class="validation-message" *ngIf="!username">
            <small>El nombre es obligatorio</small>
          </div>

          <ion-item>
            <ion-input
              label="Correo electrónico"
              labelPlacement="floating"
              type="email"
              [(ngModel)]="email"
              name="email"
              required
              placeholder="ejemplo@correo.com">
            </ion-input>
          </ion-item>
          <div class="validation-message" *ngIf="email === ''">
            <small>Introduce un correo válido</small>
          </div>

          <ion-item>
            <ion-input
              label="Contraseña"
              labelPlacement="floating"
              [type]="showPassword ? 'text' : 'password'"
              [(ngModel)]="password"
              name="password"
              required
              minlength="6"
              placeholder="Mínimo 6 caracteres">
            </ion-input>
            <ion-icon slot="end" [name]="showPassword ? 'eye-off' : 'eye'" class="toggle-password-icon" (click)="togglePasswordVisibility('password')"></ion-icon>
          </ion-item>
          <div class="validation-message" *ngIf="password && password.length < 6">
            <small>Mínimo 6 caracteres</small>
          </div>
          <div class="helper-text">Requisitos: mínimo 6, mayúscula, minúscula, número y carácter especial. (sin espacios)</div>

          <ion-item>
            <ion-input
              label="Confirmar Contraseña"
              labelPlacement="floating"
              [type]="showConfirmPassword ? 'text' : 'password'"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              required
              placeholder="Repite la contraseña">
            </ion-input>
            <ion-icon slot="end" [name]="showConfirmPassword ? 'eye-off' : 'eye'" class="toggle-password-icon" (click)="togglePasswordVisibility('confirm')"></ion-icon>
          </ion-item>
          <div class="validation-message" *ngIf="confirmPassword && confirmPassword !== password">
            <small>Las contraseñas no coinciden</small>
          </div>

          <ion-item>
            <ion-input
              label="Fecha de nacimiento"
              labelPlacement="floating"
              type="date"
              [(ngModel)]="birthdate"
              name="birthdate">
            </ion-input>
          </ion-item>

        </ion-list>

        <div class="ion-padding-top">

          <ion-button expand="block" type="submit" [disabled]="!username || !email || !password || password.length < 6 || password !== confirmPassword">
            Crear cuenta
          </ion-button>

          <ion-button
            expand="block"
            fill="clear"
            type="button"
            routerLink="/login">
            ¿Ya tienes cuenta? Inicia sesión
          </ion-button>

        </div>
      </ion-card-content>
    </ion-card>
  </form>

</ion-content>